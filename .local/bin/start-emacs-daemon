#!/bin/bash

#!/bin/sh
echo "Starting emacs daemon..." > /tmp/waybar-custom-output
output=$(/usr/bin/emacs --daemon 2>&1)
exit_code=$?

if [ $exit_code -eq 0 ]; then
  echo "Emacs daemon initialized successfully!" > /tmp/waybar-custom-output
  sleep 2
  echo "" > /tmp/waybar-custom-output
else
  # Extract first 50 characters of the error message
  error_message=$(echo "$output" | head -c 50)
  echo "$error_message..." > /tmp/waybar-custom-output
  sleep 2
  echo "" > /tmp/waybar-custom-output
fi

#!/bin/bash
# Waybar module for streaming voice typing status

STATE_FILE="${XDG_RUNTIME_DIR:-/tmp}/voice-typing-stream-state"

if [ ! -f "$STATE_FILE" ]; then
    echo '{"text": "", "class": "off", "tooltip": "Stream typing off (click to start)"}'
    exit 0
fi

STATE=$(cat "$STATE_FILE")

case "$STATE" in
    listening)
        echo '{"text": "󰍬", "class": "stream-listening", "tooltip": "Stream typing: LISTENING (click to pause)"}'
        ;;
    paused)
        echo '{"text": "󰍭", "class": "stream-paused", "tooltip": "Stream typing: PAUSED (click to resume)"}'
        ;;
    *)
        echo '{"text": "", "class": "off", "tooltip": "Stream typing off"}'
        ;;
esac

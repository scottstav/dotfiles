#!/data/data/com.termux/files/usr/bin/bash
# Bidirectional Dropbox sync for denote journal files

JOURNAL_DIR="$HOME/storage/shared/Dropbox/org/denote/journal"
REMOTE="Dropbox:org/denote/journal"

# Ensure directory exists
mkdir -p "$JOURNAL_DIR"

# Pull changes first (in case edited on desktop), then push
rclone sync "$REMOTE" "$JOURNAL_DIR" --update 2>/dev/null
rclone sync "$JOURNAL_DIR" "$REMOTE" --update 2>/dev/null
termux-notification -t "Journal synced" -c "$(date +%H:%M)"
